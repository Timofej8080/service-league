<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Сервисная Лига — Тренажёр поддержки</title>
  <style>
    /* Reset */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      color: #2c3e50;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      width: 100%;
      max-width: 900px;
      background: #34495e;
      color: #ecf0f1;
      padding: 15px 30px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    header .logo {
      font-weight: 700;
      font-size: 24px;
      letter-spacing: 2px;
      user-select: none;
    }

    header .user-info {
      font-size: 18px;
    }

    main {
      width: 100%;
      max-width: 900px;
      background: #ffffff;
      border-radius: 10px;
      padding: 30px 40px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    }

    .question {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 25px;
      min-height: 80px;
    }

    textarea {
      width: 100%;
      min-height: 100px;
      font-size: 18px;
      padding: 12px 15px;
      border: 2px solid #bdc3c7;
      border-radius: 8px;
      resize: vertical;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: border-color 0.3s ease;
    }

    textarea:focus {
      border-color: #2980b9;
      outline: none;
    }

    button {
      margin-top: 20px;
      background: #2980b9;
      color: #fff;
      font-weight: 600;
      font-size: 18px;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }

    button:hover:not(:disabled) {
      background: #3498db;
    }

    button:disabled {
      background: #95a5a6;
      cursor: not-allowed;
    }

    .feedback {
      margin-top: 20px;
      font-size: 18px;
      min-height: 30px;
      color: #27ae60;
      font-weight: 600;
      user-select: none;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">Сервисная Лига</div>
    <div class="user-info" id="user-info">Загрузка...</div>
  </header>

  <main>
    <div class="question" id="question">Загрузка вопроса...</div>
    <textarea id="answer" placeholder="Напишите ваш ответ здесь..."></textarea>
    <button id="submit-btn" disabled>Отправить ответ</button>
    <div class="feedback" id="feedback"></div>
  </main>

  <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
  <script>
    const userInfoElem = document.getElementById('user-info');
    const questionElem = document.getElementById('question');
    const answerElem = document.getElementById('answer');
    const submitBtn = document.getElementById('submit-btn');
    const feedbackElem = document.getElementById('feedback');

    // Пример вопроса (будет потом подгружаться)
    const questionText = 'Клиент жалуется, что его заказ задерживается на 3 дня. Как вы ответите?';

    function init() {
      // Инициализация VK Bridge и получение данных пользователя
      vkBridge.send('VKWebAppGetUserInfo').then(data => {
        userInfoElem.textContent = `${data.first_name} ${data.last_name}`;
        questionElem.textContent = questionText;
        submitBtn.disabled = false;
      }).catch(() => {
        userInfoElem.textContent = 'Гость';
        questionElem.textContent = questionText;
        submitBtn.disabled = false;
      });
    }

    submitBtn.addEventListener('click', () => {
      const answer = answerElem.value.trim();
      feedbackElem.textContent = '';
      if (!answer) {
        feedbackElem.style.color = '#e74c3c';
        feedbackElem.textContent = 'Пожалуйста, введите ответ.';
        return;
      }
      // Пока просто имитируем проверку и выводим положительный отзыв
      feedbackElem.style.color = '#27ae60';
      feedbackElem.textContent = 'Ответ отправлен. Спасибо!';

      answerElem.value = '';
      submitBtn.disabled = true;

      // Через 2 секунды активируем кнопку обратно
      setTimeout(() => {
        submitBtn.disabled = false;
        feedbackElem.textContent = '';
      }, 2000);
    });

    // Запуск
    init();
  </script>
</body>
</html>
